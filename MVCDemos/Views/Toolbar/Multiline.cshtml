@model DevExtreme.MVC.Demos.ViewModels.ToolbarViewModel

@{
    var toolbarModes = new[] { "Multiline mode", "Singleline mode" };
}

<div>
    <div class="widget-container">
        @(Html.DevExtreme().Resizable()
            .MinWidth(500)
            .MinHeight(150)
            .MaxHeight(370)
            .Handles(ResizeHandle.Right)
            .Area(".widget-container")
            .Content(
                Html.DevExtreme().Toolbar()
                    .ID("toolbar")
                    .Multiline(true)
                    .Items(items => {
                        items
                            .Add()
                            .Widget(w => w
                                .Button()
                                .Icon("undo")
                                .OnClick("undoButtonClick")
                            )
                            .Location(ToolbarItemLocation.Before);
                        
                        items
                            .Add()
                            .Widget(w => w
                                .Button()
                                .Icon("redo")
                                .OnClick("redoButtonClick")
                            )
                            .Location(ToolbarItemLocation.Before);
                        
                        items
                            .Add()
                            .CssClass("toolbar-separator-container")
                            .Template(new TemplateName("separator-template"))
                            .MenuItemTemplate(new TemplateName("menu-separator-template"))
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);

                        items
                            .Add()
                            .Widget(w => w
                                .DropDownButton()
                                .Width("100%")
                                .DisplayExpr("Text")
                                .KeyExpr("Size")
                                .SelectedItemKey("14")
                                .UseSelectMode(true)
                                .DataSource(Model.FontSizes)
                                .OnSelectionChanged("changeSize")
                                .ItemTemplate(new JS("fontSizeItemTemplate"))
                            )
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);

                        items
                            .Add()
                            .Widget(w => w
                                .DropDownButton()
                                .Width("100%")
                                .DisplayExpr("Text")
                                .KeyExpr("LineHeight")
                                .SelectedItemKey("1.35")
                                .StylingMode(ButtonStylingMode.Text)
                                .UseSelectMode(true)
                                .DataSource(Model.LineHeights)
                                .Icon("indent")
                                .OnSelectionChanged("changeLineHeight")
                            )
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);

                        items
                            .Add()
                            .Widget(w => w
                                .SelectBox()
                                .Placeholder("Font")
                                .DisplayExpr("Text")
                                .DataSource(Model.FontFamilies)
                            )
                            .Location(ToolbarItemLocation.Before);
                        
                        items
                            .Add()
                            .CssClass("toolbar-separator-container")
                            .Template(new TemplateName("separator-template"))
                            .MenuItemTemplate(new TemplateName("menu-separator-template"))
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);

                        items
                            .Add()
                            .Widget(w => w
                                .ButtonGroup()
                                .KeyExpr("Style")
                                .StylingMode(ButtonStylingMode.Outlined)
                                .SelectionMode(ButtonGroupSelectionMode.Multiple)
                                .Items(fontStyles => {
                                    fontStyles.Add().Icon("bold").Hint("Bold").Option("style", "bold");
                                    fontStyles.Add().Icon("italic").Hint("Italic").Option("style", "italic");
                                    fontStyles.Add().Icon("underline").Hint("Underlined").Option("style", "underline");
                                    fontStyles.Add().Icon("strike").Hint("Strikethrough").Option("style", "strike");
                                })
                                .OnItemClick("buttonGroupItemClick")
                            )
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);

                        items
                            .Add()
                            .Template(new TemplateName("separator-template"))
                            .Location(ToolbarItemLocation.Before);
                        
                        items
                            .Add()
                            .CssClass("dx-toolbar-hidden-button-group")
                            .Template(new TemplateName("text-align-template"))
                            .MenuItemTemplate(new TemplateName("text-align-menu-template"))
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);

                        items
                            .Add()
                            .Widget(w => w
                                .ButtonGroup()
                                .Items(listTypes => {
                                    listTypes.Add().Icon("orderedlist").Hint("Ordered").Option("alignment", "orderedlist");
                                    listTypes.Add().Icon("bulletlist").Hint("Bullet").Option("alignment", "bulletlist");
                                })
                                .KeyExpr("alignment")
                                .StylingMode(ButtonStylingMode.Outlined)                            
                                .OnItemClick("buttonGroupItemClick")
                            )
                            .DisplayExpr("Text")
                            .Location(ToolbarItemLocation.Before);
                        
                        items
                            .Add()
                            .CssClass("toolbar-separator-container")
                            .Template(new TemplateName("separator-template"))
                            .MenuItemTemplate(new TemplateName("menu-separator-template"))
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);

                        items
                            .Add()
                            .Widget(w => w
                                .DateBox()
                                .Type(DateBoxType.Date)
                                .Width(200)
                                .Value(new DateTime(2022, 9, 7))
                            )
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);
                        
                        items
                            .Add()
                            .CssClass("toolbar-separator-container")
                            .Template(new TemplateName("separator-template"))
                            .MenuItemTemplate(new TemplateName("menu-separator-template"))
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);

                        items
                            .Add()
                            .Widget(w => w
                                .CheckBox()
                                .Value(true)
                                .Text("Checkbox text")
                                .OnOptionChanged("onOptionChanged")
                            )
                            .ShowText(ToolbarItemShowTextMode.InMenu)
                            .Location(ToolbarItemLocation.Before)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);
                            
                        items
                            .Add()
                            .Widget(w => w
                                .Button()
                                .Icon("attach")
                                .Text("Attach")
                                .OnClick("attachButtonClick")
                            )
                            .ShowText(ToolbarItemShowTextMode.InMenu)
                            .Location(ToolbarItemLocation.After);
                            
                        items
                            .Add()
                            .Widget(w => w
                                .Button()
                                .Icon("add")
                                .Text("Add")
                                .OnClick("addButtonClick")
                            )
                            .ShowText(ToolbarItemShowTextMode.InMenu)
                            .Location(ToolbarItemLocation.After)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);
                            
                        items
                            .Add()
                            .Widget(w => w
                                .Button()
                                .Icon("trash")
                                .Text("Remove")
                                .OnClick("removeButtonClick")
                            )
                            .ShowText(ToolbarItemShowTextMode.InMenu)
                            .Location(ToolbarItemLocation.After)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);
                            
                        items
                            .Add()
                            .Widget(w => w
                                .Button()
                                .Icon("help")
                                .Text("About")
                                .OnClick("aboutButtonClick")
                            )
                            .ShowText(ToolbarItemShowTextMode.InMenu)
                            .Location(ToolbarItemLocation.After)
                            .LocateInMenu(ToolbarItemLocateInMenuMode.Auto);
                    }
                )
            )
        )
    </div>

    <div class="options-container">
        <div class="caption">Options</div>

        @(Html.DevExtreme().RadioGroup()
            .ID("toolbar-modes")
            .Layout(Orientation.Horizontal)
            .Items(toolbarModes)
            .Value(true)
            .ValueExpr("Value")
            .OnValueChanged("toolbarModesValueChanged"))
    </div>
</div>

@using (Html.DevExtreme().NamedTemplate("separator-template")) {
    <div class="toolbar-separator"></div>
}

@using (Html.DevExtreme().NamedTemplate("menu-separator-template")) {
    <div class="toolbar-menu-separator"></div>
}

@using (Html.DevExtreme().NamedTemplate("text-align-template")) {
    @(Html.DevExtreme().ButtonGroup()
        .KeyExpr("Alignment")
        .StylingMode(ButtonStylingMode.Text)
        .Items(items => {
            items.Add().Icon("alignleft").Hint("Align left").Option("alignment", "left");
            items.Add().Icon("aligncenter").Hint("Center").Option("alignment", "center");
            items.Add().Icon("alignright").Hint("Align right").Option("alignment", "right");
            items.Add().Icon("alignjustify").Hint("Justify").Option("alignment", "justify");
        })
        .SelectedItemKeys(new[] { "left" })
        .OnItemClick("buttonGroupItemClick"));
}

@using (Html.DevExtreme().NamedTemplate("text-align-menu-template")) {
    @(Html.DevExtreme().ButtonGroup()
        .KeyExpr("Alignment")
        .StylingMode(ButtonStylingMode.Text)
        .Items(items => {
            items.Add().Icon("alignleft").Hint("Align left").Option("alignment", "left").Option("text", "Align left");
            items.Add().Icon("aligncenter").Hint("Center").Option("alignment", "center").Option("text", "Center");
            items.Add().Icon("alignright").Hint("Align right").Option("alignment", "right").Option("text", "Align right");
            items.Add().Icon("alignjustify").Hint("Justify").Option("alignment", "justify").Option("text", "Justify");
        })
        .SelectedItemKeys(new[] { "left" })
        .OnItemClick("buttonGroupItemClick"));
}

<script>
    function fontSizeItemTemplate(itemData, itemIndex, itemElement) {
        itemElement.append(
            $("<div>").css({ fontSize: itemData.text }).text(itemData.text)
        )
    }

    function toolbarModesValueChanged(value) {
        var toolbar = $("#toolbar").dxToolbar("instance");
        toolbar.option("multiline", value === "Multiline mode");

        var toolbarModesInstance = $("#toolbar-modes").RadioGroup("instance");
        toolbarModesInstance.option("value", value);
    }

    function changeSize() {
        DevExpress.ui.notify('Font size value has been changed!');
    }

    function changeLineHeight() {
        DevExpress.ui.notify('Line height value has been changed!');
    }

    function buttonGroupItemClick(e) {
        DevExpress.ui.notify({ message: `The "${e.itemData.hint}" button was clicked`, width: 320 }, "success", 1000);
    }

    function undoButtonClick() {
        DevExpress.ui.notify("Undo button has been clicked!");
    }

    function attachButtonClick() {
        DevExpress.ui.notify("Attach button has been clicked!");
    }

    function addButtonClick() {
        DevExpress.ui.notify("Add button has been clicked!");
    }

    function removeButtonClick() {
        DevExpress.ui.notify("Remove button has been clicked!");
    }

    function aboutButtonClick() {
        DevExpress.ui.notify("About button has been clicked!");
    }

    function onOptionChanged() {
        DevExpress.ui.notify("Checkbox option has been changed!");
    }
</script>
